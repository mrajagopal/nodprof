// Generated by CoffeeScript 1.6.3
var express, fs, nodprof, path, port, timeWaster;

fs = require("fs");

path = require("path");

express = require("express");

nodprof = require("..");

timeWaster = require("./time-waster");

port = process.env.PORT || 3001;

exports.runServer = function() {
  var app;
  app = express();
  app.use("/nodprof/", nodprof.middleware());
  app.use(function(request, response, next) {
    response.send("this page runs a benchmark, try <a href='nodprof/'>profiling it</a>!");
    return timeWaster.run(50);
  });
  console.log("starting server at http://localhost:" + port);
  return app.listen(port);
};

if (require.main === module) {
  exports.runServer();
}
